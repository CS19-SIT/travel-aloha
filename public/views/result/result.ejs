<%- include('../includes/header') %>
<%- include('../includes/navbar') %>
<link rel="stylesheet" type="text/css" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" type="text/css" href="https://www.w3schools.com/lib/w3-theme-black.css">
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" href="../../assets/css/result.css">

<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


<!-- bootstrp -->
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<!-- Popper JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

<!-- Compressed CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/foundation-sites@6.4.3/dist/css/foundation.min.css"
    integrity="sha256-GSio8qamaXapM8Fq9JYdGNTvk/dgs+cMLgPeevOYEx0= sha384-wAweiGTn38CY2DSwAaEffed6iMeflc0FMiuptanbN4J+ib+342gKGpvYRWubPd/+ sha512-QHEb6jOC8SaGTmYmGU19u2FhIfeG+t/hSacIWPpDzOp5yygnthL3JwnilM7LM1dOAbJv62R+/FICfsrKUqv4Gg=="
    crossorigin="anonymous">

<!-- Compressed JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/foundation-sites@6.4.3/dist/js/foundation.min.js"
    integrity="sha256-mRYlCu5EG+ouD07WxLF8v4ZAZYCA6WrmdIXyn1Bv9Vk= sha384-KzKofw4qqetd3kvuQ5AdapWPqV1ZI+CnfyfEwZQgPk8poOLWaabfgJOfmW7uI+AV sha512-0gHfaMkY+Do568TgjJC2iMAV0dQlY4NqbeZ4pr9lVUTXQzKu8qceyd6wg/3Uql9qA2+3X5NHv3IMb05wb387rA=="
    crossorigin="anonymous"></script>

<title>Result</title>
<div class=container-fulid>
    <div class="col-md-12 text-center">
        <h3>Resutls:</h3>
        <h4><%= main_query.place %> <%= main_query.checkIn %> -  <%= main_query.checkOut %> for <%= main_query.adult %> adult(s)</h4>
    </div>
    <div class="row">
        <div class="col-lg-3 ml-lg-5">
            <div class="card ml-lg-0">
                <div class="card-header">
                    Google Map
                </div>
                <div class="card-body">
                    <div id="map"></div>
                    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD8NwKF69Hg_FkGR4WbWBHTCbaExa7Ymag&callback=initMap"
                    async defer></script>
                    <script>
                      var map;
                      function initMap() {
                        map = new google.maps.Map(document.getElementById('map'), {
                          center: {lat: 13.6525855, lng: 100.4936103},
                          zoom: 8
                        });
                      }
                    </script>
                </div>
            </div>
            <article class="card-group-item">
                <header class="card-header">
                    <h6 class="title">Price</h6>
                </header>
                <div class="filter-content">
                    <div class="card-body">
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label>Min</label>
                                <input type="number" class="form-control" id="price_min" placeholder="0" min="1">
                            </div>
                            <div class="form-group col-md-6 text-right">
                                <label>Max</label>
                                <input type="number" class="form-control" id="price_max" placeholder="1000" min="1">
                            </div>
                        </div>
                    </div> <!-- card-body.// -->
                </div>
            </article> <!-- card-group-item.// -->
            <article class="card-group-item">
                <header class="card-header">
                    <h6 class="title">Rate</h6>
                </header>
                <div class="filter-content">
                    <div class="card-body" style="padding-top: 0;">
                        <form class="rating-form" action="#" method="post" name="rating-movie">
                            <fieldset class="form-group">

                                <legend class="form-legend">Rating:</legend>

                                <div class="form-item">

                                    <input id="rating-5" name="rating" type="radio" value="5" onclick="updateResult()" />
                                    <label for="rating-5" data-value="5">
                                        <span class="rating-star">
                                            <i class="fa fa-star-o"></i>
                                            <i class="fa fa-star"></i>
                                        </span>
                                        <!-- <span class="ir">5</span> -->
                                    </label>
                                    <input id="rating-4" name="rating" type="radio" value="4" onclick="updateResult()" />
                                    <label for="rating-4" data-value="4">
                                        <span class="rating-star">
                                            <i class="fa fa-star-o"></i>
                                            <i class="fa fa-star"></i>
                                        </span>
                                    </label>
                                    <input id="rating-3" name="rating" type="radio" value="3" onclick="updateResult()" />
                                    <label for="rating-3" data-value="3">
                                        <span class="rating-star">
                                            <i class="fa fa-star-o"></i>
                                            <i class="fa fa-star"></i>
                                        </span>
                                        <!-- <span class="ir">3</span> -->
                                    </label>
                                    <input id="rating-2" name="rating" type="radio" value="2" onclick="updateResult()" />
                                    <label for="rating-2" data-value="2">
                                        <span class="rating-star">
                                            <i class="fa fa-star-o"></i>
                                            <i class="fa fa-star"></i>
                                        </span>
                                        <!-- <span class="ir">2</span> -->
                                    </label>
                                    <input id="rating-1" name="rating" type="radio" value="1" onclick="updateResult()" />
                                    <label for="rating-1" data-value="1">
                                        <span class="rating-star">
                                            <i class="fa fa-star-o"></i>
                                            <i class="fa fa-star"></i>
                                        </span>
                                        <!-- <span class="ir">1</span> -->
                                    </label>
                                </div>
                            </fieldset>
                        </form>
                    </div>
                </div>
            </article>
            <article class="card-group-item">
                <header class="card-header">
                    <h6 class="title">Room Features </h6>
                </header>
                <div class="filter-content">
                    <div class="card-body">
                        <form>
                            <label class="form-check">
                                <input class="form-check-input" type="checkbox" value="" id="wifi" onclick="updateResult()">
                                <span class="form-check-label">
                                    <i class="fa fa-wifi" aria-hidden="true"></i> WiFi
                                </span>
                            </label> <!-- form-check.// -->
                            <label class="form-check">
                                <input class="form-check-input" type="checkbox" value="" id="food" onclick="updateResult()">
                                <span class="form-check-label">
                                    <i class="fa fa-cutlery" aria-hidden="true"></i> Breakfast
                                </span>
                            </label> <!-- form-check.// -->
                            <label class="form-check">
                                <input class="form-check-input" type="checkbox" value="" id="parking" onclick="updateResult()">
                                <span class="form-check-label">
                                    <i class="fa fa-car" aria-hidden="true"></i> Parking
                                </span>
                            </label> <!-- form-check.// -->
                        </form>

                    </div> <!-- card-body.// -->
                </div>
            </article> <!-- card-group-item.// -->

            <article class="card-group-item">
                <header class="card-header">
                    <h6 class="title">Room type </h6>
                </header>
                <div class="filter-content">
                    <div class="card-body">
                        <label class="form-check">
                            <input class="form-check-input" type="radio" name="exampleRadio" value="" id="type_single" onclick="updateResult()">
                            <span class="form-check-label">
                                Single
                            </span>
                        </label>
                        <label class="form-check">
                            <input class="form-check-input" type="radio" name="exampleRadio" value="" id="type_double" onclick="updateResult()">
                            <span class="form-check-label">
                                Double
                            </span>
                        </label>
                        <label class="form-check">
                            <input class="form-check-input" type="radio" name="exampleRadio" value="" id="type_studio" onclick="updateResult()">
                            <span class="form-check-label">
                                Studio
                            </span>
                        </label>
                    </div> <!-- card-body.// -->
                </div>
            </article> <!-- card-group-item.// -->
        </div> <!-- card.// -->

        <div class="col-lg-8">
            <% for(var i=0; i < hotels.length; i++){ %>
            <div class=" card card-3 hotel<%if(hotels[i].wifi.toJSON()['data'][0] === 1){ %> wifi_<% } %> <%if(hotels[i].breakfast.toJSON()['data'][0] === 1){ %> breakfast_<% } %> <%if(hotels[i].carpark.toJSON()['data'][0] === 1){ %> parking_<% } %>"">
                <div class="row">
                    <div class="col-lg-7">
                        <div class="ml-3 mt-2 mb-0">
                            <span class="fa fa-star" style="color: orange;"></span>
                            <div style="float: right;">
                                <i class="heart fa fa-heart-o"></i>
                            </div>
                        </div>

                        <script>
                            $(".heart.fa").click(function () {
                                $(this).toggleClass("fa-heart fa-heart-o");
                            });
                        </script>
                        <div class="textresult mt-0">
                            <h3><a href="hotel/<%= hotels[i].hotelId %>"><%= hotels[i].hotelName %></a></h3>
                            <h4><%= hotels[i].hotelAddress %></h4>
                            <h4><%= hotels[i].hotelDescription %></h4>
                            <h4><%= hotels[i].hoteltelNumber %></h4>

                            <% if (hotels[i].wifi.toJSON()['data'][0] == 1) { %>
                            <i class="fa fa-wifi" aria-hidden="true"></i>
                            <% } %>
                            <% if (hotels[i].breakfast.toJSON()['data'][0] == 1) { %>
                            <i class="fa fa-cutlery" aria-hidden="true"></i>
                            <% } %>
                            <% if (hotels[i].carpark.toJSON()['data'][0] == 1) { %>
                            <i class="fa fa-car" aria-hidden="true"></i>
                            <% } %>
                        </div>
                        <div class="d-flex justify-content-between ml-3 mr-2" style="margin-top:4em;">
                            <div>
                                Full Price <span id="fullPrice"><%= hotels[i].fullPrice %></span>
                            </div>
                            <div>
                                Discount 500
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-5">
                        <img src="<%= hotels[i].hotelPicture %>" class="img-responsive col-xs-12">
                    </div>
                </div>
            </div>
            <% } %>
        </div>
    </div>
</div>
<script>
    function updateResult(){
        var price_min = document.getElementById("price_min").value;
        var price_max = document.getElementById("price_max").value;
        var rating;
        if(document.getElementById("rating-5").checked){
            rating = 5;
        }else if(document.getElementById("rating-4").checked){
            rating = 4;
        }else if(document.getElementById("rating-3").checked){
            rating = 3;
        }else if(document.getElementById("rating-2").checked){
            rating = 2;
        }else if(document.getElementById("rating-1").checked){
            rating = 1;
        }
        var wifi = document.getElementById("wifi").checked;
        var food = document.getElementById("food").checked;
        var parking = document.getElementById("parking").checked;
        var type;
        if(document.getElementById("type_single").checked) {
            type = "single";
        }else if(document.getElementById("type_double").checked){
            type = "double";
        }else if(document.getElementById("type_studio").checked){
            type = "studio";
        }
        var allHotel = document.getElementsByClassName("hotel");
        Array.from(allHotel).forEach(hotel => {
            hotel.style = "display:none;";
        });
        if(wifi == true){
            var haveWifi = document.getElementsByClassName("wifi_");
            Array.from(haveWifi).forEach(hotel => {
                hotel.style = "display:flex;";
            })
        }

        console.log(""+price_min+"    "+price_max+"    "+rating+"    "+wifi+"    "+food+"    "+parking+"    "+type);
    }
</script>

<%- include('../includes/footer') %>