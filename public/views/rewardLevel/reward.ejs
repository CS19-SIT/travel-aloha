<%- include('../includes/header') %>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="../assets/css/rewardLevel/extension1.css" type="text/css" />
<link rel="stylesheet" href="../assets/css/rewardLevel/coupon.css" type="text/css" />

</head>

<body>
  <%- include('../includes/navbar') %>

  <header>
    <div class="pointbg shadow"><br />
      <div class="point shadow">
        <p>points</p>
      </div>
      <p><%= point %></p>
    </div>

    <div class="ribbonTab">
      <div id="circle">
        <div id="gift">
          <div id="ribbonGift"></div>
          <div id="giftbox"></div>
        </div>
      </div>
      <h1>Reward</h1>
    </div>

    <div class="container py-2">
      <!--All div-->

      <!--Carousel for Advertisement-->
      <div class="row-carousel">
        <div id="carouselAdvertisement" class="carousel slide carousel-fade" data-ride="carousel">
          <ol class="carousel-indicators">
            <li data-target="#carouselAdvertisement" data-slide-to="0" class="active"></li>
            <li data-target="#carouselAdvertisement" data-slide-to="1"></li>
            <li data-target="#carouselAdvertisement" data-slide-to="2"></li>
            <li data-target="#carouselAdvertisement" data-slide-to="3"></li>
          </ol>

          <div class="carousel-inner">
            <div class="carousel-item active">
              <img class="d-block w-100" src="assets/img/rewardLevel/flight2.png" alt="First slide">
              <div class="carousel-caption d-none d-md-block">
                <h5>Every Flight has a Price!</h5>
                <p>Get points when you purchase every flight.</p>
              </div>
            </div>

            <div class="carousel-item">
              <img class="d-block w-100" src="assets/img/rewardLevel/hotel2.jpg" alt="Second slide">
              <div class="carousel-caption d-none d-md-block">
                <h5>What we've got here is failure to communicate.</h5>
                <p>Cool Hand Luke, 1967</p>
              </div>
            </div>

            <div class="carousel-item">
              <img class="d-block w-100" src="assets/img/rewardLevel/ent1.png" alt="Third slide">
              <div class="carousel-caption d-none d-md-block">
                <h5>Go ahead, make my day.</h5>
                <p>Sudden Impact, 1983</p>
              </div>
            </div>

            <div class="carousel-item">

              <img class="d-block w-100" src="assets/img/rewardLevel/food3.jpg" alt="Third slide">

              <div class="carousel-caption d-none d-md-block">
                <h5>Not only Flight and Hotel Vouchers!</h5>
                <p>You can also get Food and Entertainment coupons fulfil your days!</p>
              </div>
            </div>

          </div>

          <a class="carousel-control-prev" href="#carouselAdvertisement" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carouselAdvertisement" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>

        </div>
      </div>
    </div>
    <!--Carousel for Advertisement-->
  </header>


  <!---------- Coupon Section ---------->
  <div class="container" id="backToTop" style="padding-top: 60px">
    <button class="btn" id="backIcon" onClick='window.location="#backToTop"' title='Back to Top'><i class="fa fa-angle-double-up"></i></button>
    <div class="row-coupon shadow" style="border-radius: 10px;border-top: 5px solid #114d96;">
      <div class="col-sm-12 sidenav">
        <span>Coupon & Reward
          <span id="showLevel"><%- levelImg %>
            <span id="nameLevel" style="color:#114d96;"><%= level %></span>
          </span>
        </span>

        <!----------Tab---------->
        <div class="tab" style="margin-top:30px;margin-bottom:10px">
          <button class="tablinks" onclick="openCoupon(event, 'validcoupon')" id="defaultOpen">Valid</button>
          <button class="tablinks" onclick="openCoupon(event, 'usedcoupon')">Used</button>
        </div>

        <!---Below Tab--->
        <div class="col-sm-12" style="padding:0px">
          <div id="validcoupon" class="tabcontent" style="text-align: center;padding: 0px">
                <button class="btn" id="icon" onClick='window.location="#accCoupon"' title='Accommadation'><i class="fa fa-hotel">
                    <span style="font-size:16px;color: white">Hotel</span></i></button>
                <button class="btn" id="icon" onClick='window.location="#flightCoupon"' title='Flight'><i class="fa fa-plane"></i>
                  <span style="font-size:16px;color: white">Flight</span></button>
            <!---------Valid----------->
            <h3 id="accCoupon" style="padding-top:30px;">Hotel Coupon</h3>
            <!--Acc Coupon-->

            <div class="col-sm-12" style="padding:0px">

              <% for(var key of Object.keys(couponsH) ) { %>
              <div class="coupon" id="<%= couponsH[key].code %>" style="border: 5px dashed green;
                            border-radius: 15px;
                            margin: 10px 10px;
                            max-width: 300px;
                            display:inline-block;">
                <img src="assets/img/rewardLevel/hotelCoupon1.jpg" alt="Avatar">
                <div class="coupon-container" style="background-color:white">
                  <h2>
                    Hotel: <%= couponsH[key].hotelName %><br>
                    <b><%= couponsH[key].discount_percentage %></b> % OFF YOUR PURCHASE<br>
                    Minimum Purchase: <%= couponsH[key].min_purchase %> <!--waiting for new query-->
                  </h2>
                </div>
                <div class="coupon-container">
                  <p>Use Promo Code: <span class="promo"><%= couponsH[key].code %></span></p>
                  <p class="expire">Expires: <%= couponsH[key].expire_date %></p>
                  <form>
                      <input type="button" class="btn btn-primary" onclick="window.location.href = '/hotel';" value="Use Now!"/>
                   </form>
                  <!-- <button type="submit" class="btn btn-primary" style="margin:3px" href="/hotel">Use Now!</button> -->
                </div>
              </div>
              <% };%>
            <!--End Acc Coupon-->
            
            <h3 id="flightCoupon" style="padding-top:30px;">Flight Coupon</h3>

            <!--Flight Coupon-->
            <% for(var key of Object.keys(couponsA) ){ %>
            <div class="coupon" id="<%= couponsA[key].code %>" style="border: 5px dashed #5ba0f5;
                        border-radius: 15px;
                        margin: 10px 10px;
                        max-width: 300px;
                        display:inline-block;">
              <img src="assets/img/rewardLevel/flightCoupon1.jpg" alt="Avatar">
              <div class="coupon-container" style="background-color:white">
                  <h2>
                    Airline: <%= couponsA[key].airlineName %><br>
                    <b><%= couponsA[key].discount_percentage %></b> % OFF YOUR PURCHASE<br>
                    Minimum Purchase: <%= couponsA[key].minPurchase %>
                </h2>
              </div>
              <div class="coupon-container">
                <p>Use Promo Code: <span class="promo"><%= couponsA[key].code %></span></p>
                <p class="expire">Expires: <%= couponsA[key].expire_date %></p>
                <form>
                    <input type="button" class="btn btn-primary" onclick="window.location.href = '/flight';" value="Use Now!"/>
                 </form>
              </div>
            </div>
            <% };%>
            <!--End Flight Coupon-->

          </div>
          </div>

          <!----------------------------------------Used------------------------------------->
          <!--Acc Used Cou-->
          <div id="usedcoupon" class="tabcontent" style="text-align: center;padding: 0px">
            <% for(var key of Object.keys(usedCouponH) )  { %>
            <div class="coupon" id="u">
              <img src="assets/img/rewardLevel/hotelCoupon1.jpg" alt="Avatar"
                style="-webkit-filter: grayscale(100%);filter: grayscale(100%) ">

              <div class="coupon-container" style="background-color:white">
                <h2 style="color:#cf212a;font-weight: bold">
                  <p>Used Promo Code:<br> <span class="promo"><%= usedCouponH[key].code %></span></p>
                  <p style="font-style: italic">Type: hotel Coupon</p>
                  <p style="font-style: italic">Hotel: <%= usedCouponH[key].hotelName %></p>
                </h2>
              </div>
            </div>
            <%}; %>
            <!--End Acc Used Cou-->

            <!--Fli Used Cou-->
            <% for(var key of Object.keys(usedCouponA) )  { %>
              <div class="coupon" id="u">
                <img src="assets/img/rewardLevel/flightCoupon1.jpg" alt="Avatar"
                  style="-webkit-filter: grayscale(100%);filter: grayscale(100%) ">
                <div class="coupon-container" style="background-color:white">
                  <h2 style="color:#cf212a;font-weight: bold">
                    <p>Used Promo Code:<br> <span class="promo"><%= usedCouponA[key].code %></span></p>
                    <p style="font-style: italic">Type: Airline Coupon</p>
                    <p style="font-style: italic">Airline: <%= usedCouponA[key].airlineName %></p>
                  </h2>
                </div>
              </div>
              <%}; %>
              <!--End Fli Used Cou-->
            </div>
          
          <p style="color:#cf212a; font-size: 15px;text-align: center;margin-top: 10px">No more voucher!!!</p>
        </div>
      </div>
    </div>
    <!--close all div-->

    <script>
      function openCoupon(evt, couponType) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
          tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(couponType).style.display = "block";
        evt.currentTarget.className += " active";
      }

      document.getElementById("defaultOpen").click();
    </script>

    <%- include('../includes/footer') %>